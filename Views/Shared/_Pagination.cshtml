@model Obeli_K.Models.ViewModels.PaginationViewModel

@if (Model.TotalPages > 1)
{
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-center">
            <!-- Bouton Précédent -->
            @if (Model.HasPreviousPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Model.GetPageUrl(Model.CurrentPage - 1)" aria-label="Précédent">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            }
            else
            {
                <li class="page-item disabled">
                    <span class="page-link" aria-label="Précédent">
                        <span aria-hidden="true">&laquo;</span>
                    </span>
                </li>
            }

            <!-- Pages numérotées -->
            @{
                int startPage = Math.Max(1, Model.CurrentPage - 2);
                int endPage = Math.Min(Model.TotalPages, Model.CurrentPage + 2);
                
                // Ajuster si on est près du début ou de la fin
                if (endPage - startPage < 4)
                {
                    if (startPage == 1)
                    {
                        endPage = Math.Min(Model.TotalPages, startPage + 4);
                    }
                    else if (endPage == Model.TotalPages)
                    {
                        startPage = Math.Max(1, endPage - 4);
                    }
                }
            }

            <!-- Première page si nécessaire -->
            @if (startPage > 1)
            {
                <li class="page-item">
                    <a class="page-link" href="@Model.GetPageUrl(1)">1</a>
                </li>
                @if (startPage > 2)
                {
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                }
            }

            <!-- Pages principales -->
            @for (int i = startPage; i <= endPage; i++)
            {
                if (i == Model.CurrentPage)
                {
                    <li class="page-item active">
                        <span class="page-link">@i</span>
                    </li>
                }
                else
                {
                    <li class="page-item">
                        <a class="page-link" href="@Model.GetPageUrl(i)">@i</a>
                    </li>
                }
            }

            <!-- Dernière page si nécessaire -->
            @if (endPage < Model.TotalPages)
            {
                @if (endPage < Model.TotalPages - 1)
                {
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                }
                <li class="page-item">
                    <a class="page-link" href="@Model.GetPageUrl(Model.TotalPages)">@Model.TotalPages</a>
                </li>
            }

            <!-- Bouton Suivant -->
            @if (Model.HasNextPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Model.GetPageUrl(Model.CurrentPage + 1)" aria-label="Suivant">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            }
            else
            {
                <li class="page-item disabled">
                    <span class="page-link" aria-label="Suivant">
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            }
        </ul>
    </nav>
    
    <!-- Informations de pagination -->
    <div class="text-center text-muted small mt-2">
        Affichage de @Model.StartItem à @Model.EndItem sur @Model.TotalItems éléments
    </div>
}
